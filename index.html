<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <title>ECSA | GDR — Reporte Diario de Vehículos (RDV)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="color-scheme" content="light dark" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="site-header" role="banner">
    <div class="brand">
      <span class="brand-ecsa" aria-label="Empresa ECSA">ECSA</span>
      <span class="brand-sep">|</span>
      <span class="brand-gdr" aria-label="Departamento GDR">GDR</span>
    </div>
    <div class="title-wrap">
      <h1>Reporte Diario de Vehículos (RDV)</h1>
      <div id="codificacionBadge" class="badge" aria-live="polite" title="Codificación del documento">—</div>
    </div>
  </header>

  <main class="container" id="main">
    <!-- ===================== FORMULARIO RDV ===================== -->
    <section class="card" id="formArea" aria-labelledby="formTitle">
      <h2 id="formTitle">Formulario RDV — Ingreso de datos</h2>
      <p class="help">Complete todos los campos <span class="req">*</span> obligatorios. Adjunte <strong>dos fotos</strong> del estado del vehículo.</p>
      <div id="msg" class="msg" role="alert" aria-live="polite"></div>

      <form id="rdvForm" novalidate>
        <!-- Bloque: Datos generales -->
        <fieldset>
          <legend>Datos generales</legend>
          <div class="grid g2">
            <div class="field">
              <label for="codigo_vehiculo">Código del vehículo <span class="req">*</span></label>
              <input id="codigo_vehiculo" name="codigo_vehiculo" type="text" placeholder="ECO62" autocomplete="off" required aria-describedby="a_cod_tip" />
              <small id="a_cod_tip" class="hint">Use el código interno (ej.: ECO62). Se usa en la codificación del documento.</small>
            </div>

            <div class="field">
              <label for="placa">Placa (opcional)</label>
              <input id="placa" name="placa" type="text" placeholder="PQR-1234" autocomplete="off" />
            </div>

            <div class="field">
              <label for="kilometraje">Kilometraje actual <span class="req">*</span></label>
              <input id="kilometraje" name="kilometraje" type="number" min="0" step="1" placeholder="126540" required />
            </div>

            <div class="field">
              <label for="fecha_hora">Fecha y hora de la revisión <span class="req">*</span></label>
              <input id="fecha_hora" name="fecha_hora" type="datetime-local" required />
            </div>

            <div class="field">
              <label for="conductor">Conductor responsable <span class="req">*</span></label>
              <input id="conductor" name="conductor" type="text" placeholder="María López" required />
            </div>

            <div class="field">
              <label for="inspector">Inspector / Gestor GDR <span class="req">*</span></label>
              <input id="inspector" name="inspector" type="text" placeholder="Ing. Carlos Pérez (GDR)" required />
            </div>

            <div class="field g2-span">
              <label for="ubicacion">Ubicación <span class="req">*</span></label>
              <input id="ubicacion" name="ubicacion" type="text" placeholder="Quito – Patio Norte" required />
            </div>
          </div>
        </fieldset>

        <!-- Bloque: Fotos -->
        <fieldset>
          <legend>Fotos de evidencia (obligatorias)</legend>
          <div class="grid g2">
            <div class="field">
              <label for="foto1">Foto 1 <span class="req">*</span></label>
              <input id="foto1" name="foto1" type="file" accept="image/*" />
              <div class="photo-preview">
                <img id="preview1" alt="Vista previa Foto 1" />
              </div>
            </div>
            <div class="field">
              <label for="foto2">Foto 2 <span class="req">*</span></label>
              <input id="foto2" name="foto2" type="file" accept="image/*" />
              <div class="photo-preview">
                <img id="preview2" alt="Vista previa Foto 2" />
              </div>
            </div>
          </div>
        </fieldset>

        <!-- Bloque: Secciones técnicas -->
        <fieldset>
          <legend>Inspección de sistemas (estado y comentarios)</legend>

          <div class="systems">
            <!-- Cada fila: etiqueta + select estado + comentarios -->
            <div class="sys-row">
              <label> Sistema de Dirección </label>
              <select id="s_direccion" aria-label="Estado Sistema de Dirección"></select>
              <input id="c_direccion" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Sistema Eléctrico </label>
              <select id="s_electrico" aria-label="Estado Sistema Eléctrico"></select>
              <input id="c_electrico" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Revisión de Fluidos </label>
              <select id="s_fluidos" aria-label="Estado Revisión de Fluidos"></select>
              <input id="c_fluidos" type="text" placeholder="Aceite, refrigerante, frenos, dirección, limpiaparabrisas..." />
            </div>

            <div class="sys-row">
              <label> Frenos (delantero/trasero) </label>
              <select id="s_frenos" aria-label="Estado Frenos"></select>
              <input id="c_frenos" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Suspensión </label>
              <select id="s_suspension" aria-label="Estado Suspensión"></select>
              <input id="c_suspension" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Neumáticos (presión/desgaste) </label>
              <select id="s_neumaticos" aria-label="Estado Neumáticos"></select>
              <input id="c_neumaticos" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Iluminación / Señalización </label>
              <select id="s_iluminacion" aria-label="Estado Iluminación / Señalización"></select>
              <input id="c_iluminacion" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Instrumentos de tablero </label>
              <select id="s_instrumentos" aria-label="Estado Instrumentos de tablero"></select>
              <input id="c_instrumentos" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Motor / Transmisión </label>
              <select id="s_motor" aria-label="Estado Motor / Transmisión"></select>
              <input id="c_motor" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Carrocería / Vidrios </label>
              <select id="s_carroceria" aria-label="Estado Carrocería / Vidrios"></select>
              <input id="c_carroceria" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> A/C / Calefacción </label>
              <select id="s_ac" aria-label="Estado A/C / Calefacción"></select>
              <input id="c_ac" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Seguridad (extintor, triángulos, botiquín) </label>
              <select id="s_seguridad" aria-label="Estado Seguridad"></select>
              <input id="c_seguridad" type="text" placeholder="Comentarios" />
            </div>

            <div class="sys-row">
              <label> Documentación (SOAT, matrícula, revisión) </label>
              <select id="s_documentacion" aria-label="Estado Documentación"></select>
              <input id="c_documentacion" type="text" placeholder="Comentarios" />
            </div>
          </div>
        </fieldset>

        <!-- Bloque: Observaciones y estado general -->
        <fieldset>
          <legend>Resumen y decisión operativa</legend>
          <div class="grid g2">
            <div class="field">
              <label for="estado_general">Estado general <span class="req">*</span></label>
              <select id="estado_general" required>
                <option value="">Seleccione…</option>
                <option>OK</option>
                <option>Observado</option>
                <option>Crítico</option>
              </select>
            </div>

            <div class="field">
              <span class="label">¿Apto para servicio? <span class="req">*</span></span>
              <div class="radios" role="radiogroup" aria-label="Apto para servicio">
                <label><input type="radio" name="apto" value="si"> Sí</label>
                <label><input type="radio" name="apto" value="no"> No</label>
              </div>
            </div>

            <div class="field g2-span">
              <label for="observaciones">Observaciones</label>
              <textarea id="observaciones" rows="3" placeholder="Notas relevantes…"></textarea>
            </div>

            <div class="field g2-span">
              <label for="acciones_correctivas">Acciones Correctivas</label>
              <textarea id="acciones_correctivas" rows="3" placeholder="Acciones propuestas o ejecutadas…"></textarea>
            </div>
          </div>
        </fieldset>

        <!-- Controles -->
        <div class="actions" id="controls">
          <button type="button" id="btnGuardar">Guardar</button>
          <button type="button" id="btnCargar">Cargar último</button>
          <button type="button" id="btnExport">Exportar JSON</button>
          <label class="btn-file">
            Importar JSON <input id="importFile" type="file" accept="application/json" hidden />
          </label>
          <button type="reset" id="btnLimpiar">Limpiar</button>
          <button type="button" id="btnImprimir" class="primary">Imprimir / PDF</button>
        </div>
      </form>
    </section>

    <!-- ===================== INFORME OFICIAL ===================== -->
    <section class="card report" id="reportArea" aria-labelledby="reportTitle">
      <h2 id="reportTitle">Informe Oficial — ECSA • Departamento GDR</h2>

      <div class="report-header">
        <div class="report-id">
          <div class="label">Codificación</div>
          <div class="code" id="r_codificacion">—</div>
        </div>
        <div class="report-meta">
          <div><strong>Documento:</strong> Reporte Diario de Vehículos (RDV)</div>
          <div><strong>Uso:</strong> Interno — ECSA | GDR</div>
        </div>
      </div>

      <div class="meta-grid">
        <div><span>Código Vehículo:</span> <strong id="r_codigo">—</strong></div>
        <div><span>Placa:</span> <strong id="r_placa">—</strong></div>
        <div><span>Fecha/Hora:</span> <strong id="r_fecha">—</strong></div>
        <div><span>Kilometraje:</span> <strong id="r_km">—</strong></div>
        <div><span>Conductor:</span> <strong id="r_conductor">—</strong></div>
        <div><span>Inspector:</span> <strong id="r_inspector">—</strong></div>
        <div class="g2-span"><span>Ubicación:</span> <strong id="r_ubicacion">—</strong></div>
      </div>

      <h3>Inspección técnica por sistemas</h3>
      <table class="tbl-systems" aria-describedby="tblDesc">
        <caption id="tblDesc" class="sr-only">Tabla con estados {OK, Observado, Crítico} y comentarios.</caption>
        <thead>
          <tr>
            <th>Sistema</th>
            <th>Estado</th>
            <th>Comentarios</th>
          </tr>
        </thead>
        <tbody id="r_tbl_body">
          <!-- Se llena vía JS -->
        </tbody>
      </table>

      <div class="summary">
        <div><span>Estado general:</span> <strong id="r_estado_general">—</strong></div>
        <div><span>Apto para servicio:</span> <strong id="r_apto">—</strong></div>
      </div>

      <div class="notes">
        <div>
          <h4>Observaciones</h4>
          <p id="r_obs">—</p>
        </div>
        <div>
          <h4>Acciones Correctivas</h4>
          <p id="r_acc">—</p>
        </div>
      </div>

      <h3>Evidencias fotográficas</h3>
      <div class="photos">
        <figure>
          <img id="r_foto1" alt="Evidencia 1" />
          <figcaption>Foto 1</figcaption>
        </figure>
        <figure>
          <img id="r_foto2" alt="Evidencia 2" />
          <figcaption>Foto 2</figcaption>
        </figure>
      </div>

      <div class="signatures">
        <div>
          <div class="sig-line"></div>
          <div class="sig-name" id="r_conductor_sig">—</div>
          <div class="sig-role">Conductor responsable</div>
        </div>
        <div>
          <div class="sig-line"></div>
          <div class="sig-name" id="r_inspector_sig">—</div>
          <div class="sig-role">Inspector / Gestor GDR</div>
        </div>
      </div>

      <footer class="report-footer">
        <div>Emitido por <strong>ECSA – GDR</strong> | Uso Interno</div>
        <div>Fecha/Hora de emisión: <span id="r_emitido">—</span> | Folio: <span id="r_folio">—</span></div>
      </footer>
    </section>
  </main>

  <script src="app.js"></script>
</body>
</html>
